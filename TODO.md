# TODO

## Bugs
- ~~in game 不能把名字改成空字串~~
- 如果 TAKE_POT 和 PUT_POT 分成兩個 effect 分別觸發，則會因為先觸發一個然後又觸發另一個導致放下又拿起來

## Improve
- ~~Press Enter to send 'my name' input~~
- can users use same name ?



## Important Features

- effect 的顯示
    - 公開 effect 要顯示在個人裝置和 host 畫面
    - 私人 effect 只顯示在個人裝置
        - 私人 effect 就要分對 "誰" (玩家/隊伍)
- effect 有分對象: 對角色的、對隊伍的、對玩家的
    - 其實不用分，因為就分公開和私人
        - 私人效果: 首先要確定有沒有符合 trigger 條件 (「選擇」/「結果」/「行為」/「位置」)
    - 對玩家的效果，目前的規劃中全部都是以「選擇」trigger
    - 對玩家個人的效果，目前只會顯示在玩家的裝置上
    activated
    deactivated

- trigger 有分成
    - 要真的踩上去該「位置」
    - 要投票「結果」是往那邊動、才會觸發的
    (結果跟位置的差異情境: (1) 當面對障礙物時，位置不會到 (2) 某些技能發動時，雖然選擇了該方向，也不會踩上去，可能會飛過去 (3) 被蟲或物品推動，所以沒有前進(如果 trigger 是綁在地板上，被蟲阻擋，好像不應該觸發；目前會有綁在地板上的 trigger 嗎？隨機產生的地磚分數好像算是？))
        - 如果障礙物就是地板的一部份，應該不前進也要觸發 (或是想成碰到了，產生效果、退回原位)
        - 如果障礙物是物品，好像可以也在碰到時觸發
        - 如果障礙物是蟲，總覺得不應該觸發，雖然不是很重要但先不要做這個不觸發好了
    - 所以
        - 「公開」效果一定是以角色「行為」結果 trigger，或是以投票「結果」 trigger
            - 以「行為」trigger，就是看角色有沒有踩上去、撞上去、摸它拿它
            - 以「結果」trigger，就是看投票結果的方向 (四向+不動)
        - 「私人」效果可以是以玩家「選擇」trigger，也可以是以角色「行為」，也可以是投票「結果」
            - 但效果的對象一定是玩家個人
            - 不能是影響全體的效果，有點不公平????
            - 不過，只顯示給私人的效果，如果會影響到整個遊戲，或是角色，就會變成該玩家必須要提出來溝通的風險，也滿有趣的
            - 花、爐等東西會固定帶給玩家私人效果？觸發方法一定是「行為」?還是「選擇」
    - 只要 A 「選擇」投給他，就會對 A 觸發的
        - 這個的對象一定是對玩家
    - 「行為」跟「位置」好像是類似的，差別是:
        - 行為應該是做了之後角色沒動
        - 位置是不管角色有沒有動，看最後的位置是不是在磚上
        - 同一個東西可能會可以被「行為」或「位置」觸發，但觸發了「行為」就應該不要踩上去，而要觸發「位置」就一定要已經踩在上面
        - 如果一個技能可以把本來是障礙物的東西變成不是障礙物，那之後就不應該觸發「行為」trigger
        - 如果碰到障礙物，就有可能又觸發障礙物的「行為」trigger，又觸發原本格子的「位置」trigger
- 效果的發動順序
    - 觸發「選擇」 trigger
    - 發動技能
        - 消滅敵對
        - 角色回血
        - 改變移動方向/移動落點
        - 影響投票結果
    - 發動「結果」trigger
    - 發動「行為」trigger (也可以叫「接觸」)
        - 觸發物品效果 (物品、火、蟲)
            - 蟲可能會改變角色移動落點
        - 觸發地塊效果
            - 觸發「行為」trigger
            - 角色扣血
        - 角色可能死亡
        - 角色移動
    - 發動「位置」trigger (如果是踩著會有效果的格子，因為撞到障礙物而不動，應該要再觸發踩著的效果)
- 效果應該要根據什麼決定要存放在哪裡？
    - 公開的一定要顯示給所有人跟 host，私人的要給各個適合的人 ?
    - 根據觸發類型，執行時就按照階段把該類型 effect 拿出來一一執行 ?
        - 如果是「行為」或「位置」trigger 的 effect，可以存在 cell 或 item 上面
    - 跟據觸發效果的方向? 這個不太準確，只有「選擇」和「結果」可以這樣分，「行為」和「位置」因為技能、蟲子等外在因素，可能會觸發到跟原本預期不同的格子的效果
    - 靠「選擇」或「投票結果」觸發的效果，記錄在 state 上的 effects
- triggers 要被記進 state，要可以從 triggers 直接找回對應的行為 function
    - triggers 也可以改叫做 action effects
- save state
- incremental state (can also as action log)
- load state
- kick user
- highlight user (high frequency flash)

## Features

- UI: 隱藏地圖外的格子
- 隱藏的分數
  - 要決定分數的用途，才能評價每個動作要拿幾分
  - 固定位置
    - 花 綠
    - 爐 紅
    - 書？ 藍
    - 椅？ 黃
    - 牆？
    - 空地
    - 戶外
    - 像？
  - 固定模式的
    - 在房間鞋子上觸發
    - 在大廳的柱子間觸發
    - 劍的四週？
    - 在餐廳的四個出口
    - 在冰箱觸發回頭的扣分
    - 在某個長路上擋住去路？
  - 隨機生成

  - 獎勵行動模式 (這比較像是隱藏小任務，可一開始就給各隊某個，也可以當獎勵兌換)
    - 持續前進
    - 每次轉彎
    - 每次折返
    - 停在原地
    - 跟大家選一樣的
    - 跟大家不同
- 隱藏的道具(好像至少要一種道具，才能測試)
  - 
- 發動投票
- 睡覺的床
- 發火的劍
- 移動的蟲
- 偷花的人
- 攻擊蟲
- 跳過牆壁
- 得到提示
- 顯示密碼按鈕
- 放下火鍋料
- 死掉復活的機制
